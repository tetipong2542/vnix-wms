
{% extends "base.html" %}
{% block content %}
<h4>‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h4>

<div class="alert alert-warning">
  <strong>‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</strong> ‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
</div>

<form method="post" class="row g-3 mb-4">
  <div class="col-12">
    <h5>‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h5>
  </div>

  <div class="col-md-4">
    <select name="scope" id="scopeSelect" class="form-select" required onchange="toggleDateInputs()">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• --</option>
      <option value="today">‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå)</option>
      <option value="date_range">‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á)</option>
      <option value="all">‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏•‡∏µ‡πâ‡∏¢‡∏á)</option>
      <option value="deleted_bin">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ (Order ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö) ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
      <option value="cancelled">‡∏•‡∏ö Order ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
      <option value="issued">‡∏•‡∏ö Order ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
      <option value="sales">‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢ (Sales) ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
    </select>
  </div>

  <div class="col-md-6" id="dateRangeInputs" style="display: none;">
    <div class="input-group">
      <span class="input-group-text">‡∏à‡∏≤‡∏Å</span>
      <input type="date" name="date_from" class="form-control">
      <span class="input-group-text">‡∏ñ‡∏∂‡∏á</span>
      <input type="date" name="date_to" class="form-control">
    </div>
  </div>

  <div class="col-12" id="targetTypeInputs" style="display: none;">
    <div class="card bg-light border-warning mt-2">
      <div class="card-body py-2">
        <label class="fw-bold mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ:</label>
        <div class="d-flex flex-wrap gap-4">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="targets" value="orders" id="chk_orders" checked>
            <label class="form-check-label" for="chk_orders">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå (OrderLine)</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="targets" value="sales" id="chk_sales">
            <label class="form-check-label" for="chk_sales">‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢ (Sales)</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="targets" value="issued" id="chk_issued">
            <label class="form-check-label" for="chk_issued">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏à‡πà‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (Issued)</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="targets" value="cancelled" id="chk_cancelled">
            <label class="form-check-label" for="chk_cancelled">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancelled)</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="targets" value="deleted" id="chk_deleted">
            <label class="form-check-label" for="chk_deleted">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏ö (Deleted Log)</label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-2">
    <button type="submit" class="btn btn-danger w-100" onclick="return confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•?')">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
  </div>
</form>

<script>
function toggleDateInputs() {
  const scope = document.getElementById('scopeSelect').value;
  const dateDiv = document.getElementById('dateRangeInputs');
  const targetDiv = document.getElementById('targetTypeInputs');
  
  if (scope === 'date_range') {
    dateDiv.style.display = 'block';
    targetDiv.style.display = 'block';
    // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
    dateDiv.querySelectorAll('input').forEach(input => input.required = true);
  } else {
    dateDiv.style.display = 'none';
    targetDiv.style.display = 'none';
    // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö
    dateDiv.querySelectorAll('input').forEach(input => input.required = false);
  }
}
</script>

<div class="card">
  <div class="card-body">
    <h6 class="card-title">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</h6>
    <ul class="mb-0">
      <li><strong>‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:</strong> ‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</li>
      <li><strong>‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á):</strong> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô-‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î ‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏±‡πâ‡∏ô</li>
      <li><strong>‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> ‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡∏£‡∏ß‡∏°‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞)</li>
      <li><strong>üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ (Order ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö):</strong> ‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏õ‡∏Å‡∏ï‡∏¥</li>
      <li><strong>‡∏•‡∏ö Order ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> ‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (CancelledOrder) ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
      <li><strong>‡∏•‡∏ö Order ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> ‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (IssuedOrder) ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
      <li><strong>‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢ (Sales) ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ (Sales) ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
    </ul>
  </div>
</div>

<div class="mt-4">
  <h6>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</h6>
  <div class="row">
    <div class="col-md-3">
      <div class="card bg-light">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-muted">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h6>
          <h4 class="mb-0">{{ stats.total_orders }}</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card bg-light">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-muted">Order ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</h6>
          <h4 class="mb-0">{{ stats.cancelled_orders }}</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card bg-light">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-muted">Order ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</h6>
          <h4 class="mb-0">{{ stats.issued_orders }}</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card bg-light">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-muted">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h6>
          <h4 class="mb-0">{{ stats.today_orders }}</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3 mt-3">
      <div class="card bg-light">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-muted">‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢ (Sales)</h6>
          <h4 class="mb-0">{{ stats.total_sales }}</h4>
        </div>
      </div>
    </div>
    <div class="col-md-3 mt-3">
      <div class="card bg-light border-danger">
        <div class="card-body">
          <h6 class="card-subtitle mb-2 text-muted">üóëÔ∏è Order ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö (‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞)</h6>
          <h4 class="mb-0 text-danger">{{ stats.deleted_orders }}</h4>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
