
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ APP_NAME }}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  
  <style>
    /* Page Title Styling - ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤ */
    .page-title {
      gap: .75rem;
    }

    .page-title-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      background: linear-gradient(135deg, #0d6efd, #6610f2);
      color: #fff;
      box-shadow: 0 .25rem .5rem rgba(13, 110, 253, .35);
    }

    .page-title-main {
      font-size: 1.6rem;
      font-weight: 700;
      letter-spacing: .03em;
      color: #212529;
    }
  </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="{{ url_for('dashboard') }}">{{ APP_NAME }}</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a href="{{ url_for('dashboard') }}" class="nav-link">Dashboard</a></li>

        {# ===== ‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤: ‡∏Å‡∏±‡∏ô‡∏û‡∏±‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ has_endpoint ‡πÉ‡∏ô Jinja ===== #}
        {% set _ep = has_endpoint if has_endpoint is defined else None %}
        {% set _has_orders   = _ep and _ep('import_orders_view') %}
        {% set _has_products = _ep and _ep('import_products_view') %}
        {% set _has_stock    = _ep and _ep('import_stock_view') %}
        {% set _has_sales    = _ep and _ep('import_sales_view') %}
        {# >>> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à endpoint ‡πÉ‡∏´‡∏°‡πà #}
        {% set _has_cancel_import = _ep and _ep('import_cancel_view') %}
        {% set _has_issued_import = _ep and _ep('import_issued_orders') %}
        {% set _any_import   = _has_orders or _has_products or _has_stock or _has_sales or _has_cancel_import or _has_issued_import %}

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤</a>
          <ul class="dropdown-menu">
            {% if _has_orders %}
              <li><a class="dropdown-item" href="{{ url_for('import_orders_view') }}">Import Orders</a></li>
            {% endif %}
            {# >>> ‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà: Import Orders ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å #}
            {% if _has_cancel_import %}
              <li><a class="dropdown-item" href="{{ url_for('import_cancel_view') }}">Import Orders (‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å)</a></li>
            {% endif %}
            {# >>> NEW: Import Orders (‡∏à‡πà‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß) #}
            {% if _has_issued_import %}
              <li><a class="dropdown-item" href="{{ url_for('import_issued_orders') }}">Import Orders (‡∏à‡πà‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)</a></li>
            {% endif %}
            {# <<< NEW #}
            {% if _has_products %}
              <li><a class="dropdown-item" href="{{ url_for('import_products_view') }}">Import ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>
            {% endif %}
            {% if _has_stock %}
              <li><a class="dropdown-item" href="{{ url_for('import_stock_view') }}">Import ‡∏™‡∏ï‡πá‡∏≠‡∏Å</a></li>
            {% endif %}
            {% if _has_sales %}
              <li><a class="dropdown-item" href="{{ url_for('import_sales_view') }}">Import ‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≤‡∏¢</a></li>
            {% endif %}

            {# ===== ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô" ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ admin/staff ‡πÅ‡∏•‡∏∞‡∏°‡∏µ endpoint ===== #}
            {% if _ep and _ep('admin_shops') and CURRENT_USER and CURRENT_USER.role in ['admin','staff'] %}
              {% if _any_import %}<li><hr class="dropdown-divider"></li>{% endif %}
              <li><a class="dropdown-item" href="{{ url_for('admin_shops') }}">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</a></li>
            {% endif %}

            {# ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ endpoint ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡∏¢ (‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ has_endpoint) ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á #}
            {% if not _any_import %}
              <li><span class="dropdown-item-text text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡πç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤</span></li>
            {% endif %}
          </ul>
        </li>

        {# ‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π "‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡∏•‡∏±‡∏á", "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡πâ‡∏≠‡∏¢", "Order‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß", "Order‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å" ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Navbar #}
        {# ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ Navbar ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤ (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Dashboard) #}
        {# ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ó‡∏ô #}

        <li class="nav-item"><a href="{{ url_for('admin_clear') }}" class="nav-link">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a></li>
        <li class="nav-item"><a href="{{ url_for('admin_users') }}" class="nav-link">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a></li>
      </ul>

      <div class="d-flex align-items-center gap-3">
        <span class="navbar-text text-warning small">
          ‡πÄ‡∏ß‡∏•‡∏≤ (‡πÑ‡∏ó‡∏¢/‡∏û.‡∏®.): <span id="clockTH"></span>
        </span>
        {% if CURRENT_USER %}
          <span class="badge text-bg-light text-dark">üë§ {{ CURRENT_USER.username }}</span>
          <a class="btn btn-sm btn-outline-light" href="{{ url_for('logout') }}">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
        {% else %}
          <a class="btn btn-sm btn-outline-light" href="{{ url_for('login') }}">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<main class="container-fluid py-3">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="container">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  {% block content %}{% endblock %}
</main>

{% block footer %}
<footer class="bg-light border-top mt-5">
  <div class="container py-3 small">
    <div class="text-center">
      <div>[VNIX Order Management] ¬© {{ BE_YEAR }} ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ß‡∏µ‡∏ô‡∏¥‡∏Å ‡∏Å‡∏£‡∏∏‡πä‡∏õ ‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</div>
      <div class="text-muted mt-2" style="white-space: pre-line;">
‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤ (Trade Secret) ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ß‡∏µ‡∏ô‡∏¥‡∏Å ‡∏Å‡∏£‡∏∏‡πä‡∏õ ‡∏à‡∏≥‡∏Å‡∏±‡∏î
‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏¥‡πÉ‡∏´‡πâ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡πÉ‡∏î‡πÜ ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢ ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥ ‡∏î‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏á ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏à‡∏Å‡∏à‡πà‡∏≤‡∏¢ ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡πÇ‡∏≠‡∏ô‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå‡∏ô‡∏µ‡πâ (‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô) ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πà‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≤‡∏¢‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ø
‡∏ú‡∏π‡πâ‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏ß‡∏¥‡∏ô‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞/‡∏´‡∏£‡∏∑‡∏≠ ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Ñ‡∏î‡∏µ‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏û‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏ç‡∏≤‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
      </div>
    </div>
  </div>
</footer>
{% endblock %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>